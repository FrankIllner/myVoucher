(function(e){function t(t){for(var a,o,n=t[0],l=t[1],c=t[2],u=0,h=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},r={app:0},i=[];function o(e){return n.p+"js/"+({}[e]||e)+"."+{"chunk-2d0b6aa9":"4acca2b2","chunk-2d0b9245":"415bab80","chunk-2d0cc6b4":"b2802cf0","chunk-2d22bcc3":"9f0b6808"}[e]+".js"}function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.e=function(e){var t=[],s=r[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise((function(t,a){s=r[e]=[t,a]}));t.push(s[2]=a);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.src=o(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(u);var s=r[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,s[1](c)}r[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"123d":function(e,t,s){},3745:function(e,t,s){},"4ffd":function(e,t,s){e.exports=s.p+"img/logo.3bff6880.png"},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("Header"),s("div",{staticClass:"wrapper"},[s("router-view")],1),s("Footer")],1)},i=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"full-container"},[s("Nav")],1)},n=[],l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"row header-headlines"},[e._m(0),e.isLogin&&"registerBusiness"!==e.userType?s("div",{staticClass:"col-8"},[s("a",{staticClass:"d-block",attrs:{href:"/my-wallet"}},[e._v("Alle Angebote/Wallet")])]):e._e()]),s("div",{},[s("Slide",{attrs:{right:""}},[e.isLogin?s("div",{staticClass:"d-block"},[s("b",[e._v("User "+e._s(e.username)+" ")]),s("br"),"registerBusiness"==e.userType?s("a",{attrs:{href:"/add-business-voucher"}},[e._v("Deine Gutscheine hinterlgen")]):e._e(),s("br"),"registerBusiness"==e.userType?s("a",{attrs:{href:"/company/"+e.additionalId+"/userId/"+e.u_id}},[e._v("Mein Profil")]):s("a",{attrs:{href:"/my-wallet"}},[e._v("Mein Wallet")]),s("br"),"registerBusiness"==e.userType?s("a",{attrs:{href:"/verwaltung"}},[e._v("Verwaltung")]):e._e(),s("br"),s("a",{attrs:{href:"#"},on:{click:e.logUserOut}},[e._v(e._s(e.isLoginLabel))]),s("br")]):e._e(),s("div",{staticClass:"d-block"},["registerBusiness"!==e.userType?s("a",{staticClass:"highligting",attrs:{href:"/register-business"}},[e._v("Partner werden")]):e._e(),s("br"),s("a",{staticClass:"highligting",attrs:{href:"/agb"}},[e._v("AGB's")]),s("br"),s("a",{staticClass:"highligting",attrs:{href:"/wir"}},[e._v("Über uns")]),s("br"),s("a",{staticClass:"highligting",attrs:{href:"/kontakt"}},[e._v("Kontakt")]),s("br")])])],1)])},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo col-3"},[a("a",{attrs:{href:"/"}},[a("img",{attrs:{src:s("4ffd")}})])])}],u=s("48ac"),d=s.n(u),h=s("db0f"),p={components:{Slide:h["Slide"]},data(){return{isLoginLabel:"",isLogin:"",userType:"",username:"",u_id:"",additionalId:""}},methods:{logUserOut(){localStorage.removeItem("jwt"),this.$router.push("/"),location.reload()},async checklogin(){let e=localStorage.getItem("jwt"),t=d.a.decode(e);this.user=t;let s=this.user._id;try{let t=await this.$http.post("/user/getUserStatus",{checkUserId:s},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});if(console.log(t.data),!0===t.data.isActive){let t=d.a.decode(e);this.user=t,this.isLogin=!0,this.username=this.user.name,this.userType=this.user.usertype;let s=this.user._id;this.u_id=s,this.isLoginLabel="Logout";try{let t=await this.$http.post("/user/getAdditionalId",{u_id:s},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});console.log(t),t&&(this.additionalId=t.data.o_additional[0].additionalId)}catch(a){console.log(a)}}else this.username="",this.isLoginLabel="Login",this.isLogin=!1}catch(a){console.log(a)}}},created(){this.checklogin()},watch:{$route(){this.checklogin()}}},m=p,v=s("2877"),g=Object(v["a"])(m,l,c,!1,null,null,null),f=g.exports,_={components:{Nav:f}},b=_,y=Object(v["a"])(b,o,n,!1,null,null,null),C=y.exports,k=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},w=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("footer",{staticClass:"full-container"},[s("ul",{staticClass:"container"},[s("li",[s("a",{attrs:{href:"/about"}},[e._v("Über uns ")])]),s("li",[s("a",{attrs:{href:"/about"}},[e._v("Kontakt ")])]),s("li",[s("a",{attrs:{href:"/about"}},[e._v("AGB ")])]),s("li",[s("a",{attrs:{href:"/about"}},[e._v("Impressum ")])])])])}],B={},$=Object(v["a"])(B,k,w,!1,null,null,null),I=$.exports,x={components:{Header:C,Footer:I}},S=x,V=(s("5c0b"),Object(v["a"])(S,r,i,!1,null,null,null)),j=V.exports,A=s("8c4f"),P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("section",[s("div",{staticClass:"container voucher-overview mt-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",[s("h2",[e._v("Gutschein kaufen")]),s("div",{staticClass:"group cards row"},e._l(e.allBusiness,(function(t){return s("div",{key:t._id,staticClass:"col-xs-12 col-sm-6 col-md-4 p-2"},[s("router-link",{attrs:{to:"/company/"+t._id+"/userid/"+t.userId}},[s("div",{staticClass:"item"},[s("p",[s("b",[e._v(e._s(t.company))])]),s("span",[e._v(e._s(t.street)+" "+e._s(t.streetNo))]),s("br"),s("span",[e._v(e._s(t.postcode)+" "+e._s(t.city))]),s("br"),s("span",[e._v(e._s(t.phone))]),s("br"),s("span",[e._v(e._s(t.businessNo))]),s("br"),s("span",[e._v(e._s(t.userId))]),s("br")])])],1)})),0)]),s("div",{staticClass:"mt-5"},[s("h2",[e._v("Meine gekauften Gutscheine")]),s("div",{staticClass:"group cards row"},e._l(e.allBoughtVouchers,(function(t){return s("div",{key:t._id,staticClass:"col-xs-12 col-sm-6 col-md-4 p-2"},[s("div",{staticClass:"item"},[s("p",[s("b",[e._v(e._s(t.name))])]),s("span",[s("label",[e._v("Gutschein-Wert: ")]),e._v(" "+e._s(t.price)+"€")]),s("br"),s("span",[s("label",[e._v("Bekommen von: ")]),e._v(e._s(t.fromPerson))]),s("br"),s("span",[s("label",[e._v("Gutschein läuft am ")]),e._v(" "+e._s(t.expiryDate)+" ab")]),s("div",[s("img",{attrs:{src:"/qr/images/"+e.user_id+"-"+t._id+".png"}})])])])})),0)]),s("div",{staticClass:"mt-5"},[s("h2",[e._v("Meine Gutscheine")]),s("div",{staticClass:"group cards row"},e._l(e.allVouchers,(function(t){return s("div",{key:t._id,staticClass:"col-xs-12 col-sm-6 col-md-4 p-2"},[s("div",{staticClass:"item"},[s("p",[s("b",[e._v(e._s(t.name))])]),s("span",[s("label",[e._v("Gutschein-Wert: ")]),e._v(" "+e._s(t.price)+"€")]),s("br"),s("span",[s("label",[e._v("Bekommen von: ")]),e._v(e._s(t.fromPerson))]),s("br"),s("span",[s("label",[e._v("Gutschein läuft am ")]),e._v(" "+e._s(t.expiryDate)+" ab")]),s("VueSlickCarousel",e._b({},"VueSlickCarousel",e.settings,!1),e._l(t.file1,(function(e){return s("div",{key:e},[s("img",{attrs:{src:"/api/uploads/"+e}})])})),0)],1)])})),0)]),"registerBusiness"==e.user.usertype?s("div",{staticClass:"mt-5"},[s("p",[e._v("Füge weitere Gutscheine von deinem Unternehmen hinzu!")]),s("router-link",{attrs:{to:"/add-business-voucher"}},[e._v("Klicke hier!")])],1):s("div",{staticClass:"mt-5"},[s("p",[e._v("Füge weitere deiner privaten Gutscheine hinzu!")]),s("router-link",{attrs:{to:"/add-user-voucher"}},[e._v("Klicke hier!")])],1)])])])])])},E=[],L=s("a7ab"),T=s.n(L),O=(s("7b8d"),s("6a2c"),{name:"AllVouchers",components:{VueSlickCarousel:T.a},data(){return{user:{},allVouchers:[],allBusiness:[],allBoughtVouchers:[],userId:this.$userId,user_id:"",settings:{arrows:!0,dots:!0,slidesToShow:1,slidesToScroll:1}}},methods:{async getUserVoucherDetails(){let e=localStorage.getItem("jwt"),t=d.a.decode(e);this.user=t;try{let t=await this.$http.post("/voucher/getAllVouchers",{},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});t&&(console.log(t),this.allVouchers=t.data.data)}catch(s){console.log(s)}},async getAllBusiness(){let e=localStorage.getItem("jwt"),t=d.a.decode(e);this.user=t;try{let t=await this.$http.post("/user/getAllBusiness",{},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});console.log(t),t&&(this.allBusiness=t.data.data)}catch(s){console.log(s)}},async getAllBoughtVouchers(){let e=localStorage.getItem("jwt"),t=d.a.decode(e);this.user=t;let s=this.user.usertype,a=this.user._id;this.user_id=a;try{let t=await this.$http.post("/voucher/getAllBoughtVouchers",{user_id:a,userType:s},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});t&&(this.allBoughtVouchers=t.data.vouchers)}catch(r){console.log(r)}},checkUserType(){const e=this.$userId;let t=this.$companyId;this.param=this.$route.params;let s=this.param.aid;""==t&&(t=s),"registerBusiness"===this.$userType&&this.$router.push("/company/"+t+"/userid/"+e)}},async created(){this.checkUserType(),this.getUserVoucherDetails(),this.getAllBusiness(),this.getAllBoughtVouchers(),this.$root.$refs.AllVouchers=this}}),U=O,N=Object(v["a"])(U,P,E,!1,null,null,null),G=N.exports,F=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},z=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"about"},[s("h1",[e._v("This is an about page")])])}],D={},M=Object(v["a"])(D,F,z,!1,null,null,null),q=M.exports,W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-main"},[s("div",{staticClass:"container"},[s("Start")],1)])},H=[],K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fullscreen-image"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[e._m(0),e._m(1),e._v(" "+e._s(e.$isLogin)+" "),e.$isLogin?e._e():s("div",{staticClass:"col-12 col-xs-12 mt-5"},[s("div",{staticClass:"button center"},[s("router-link",{attrs:{to:"/register-business"}},[e._v("Partner werden")])],1)]),s("div",{staticClass:"col-12"},[e.$isLogin?e._e():s("div",[s("Login")],1)]),"registerBusiness"!==this.$userType?s("div",{staticClass:"voucher-overview mt-4"},[e.$isLogin?s("h2",[e._v("Akktuelle Gutscheine in deinem Umkreis")]):e._e(),s("div",{staticClass:"group cards row"},e._l(e.allBusiness,(function(t){return s("div",{key:t._id,staticClass:"col-xs-12 col-sm-6 col-md-4 p-2"},[s("router-link",{attrs:{to:"/company/"+t._id+"/userid/"+t.userId}},[s("div",{staticClass:"item"},[s("p",[s("b",[e._v(e._s(t.company))])]),s("span",[e._v(e._s(t.street)+" "+e._s(t.streetNo))]),s("br"),s("span",[e._v(e._s(t.postcode)+" "+e._s(t.city))]),s("br"),s("span",[e._v(e._s(t.phone))]),s("br"),s("span",[e._v(e._s(t.businessNo))]),s("br")])])],1)})),0)]):e._e()])])])},Q=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"block col-12 col-md-6 mt-5"},[s("h3",[e._v("Hallo, hier steht eine Erklärung - wer wir sind und was wir machen! ")]),s("span",[e._v("Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"block col-12 col-md-6 mt-5"},[s("h3",[e._v("Hier kurze Erklärung zum Partner Status - bieten Sie Gutscheine hier an und profitieren Sie!!")]),s("span",[e._v(" Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna ")])])}],J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"login-container"},[s("b-form",{staticClass:"text-center border p-2 mb-4",staticStyle:{"margin-top":"70px",height:"auto","padding-top":"30px !important"},on:{submit:function(t){return t.preventDefault(),e.loginUser.apply(null,arguments)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.login.email,expression:"login.email"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"email",placeholder:"Email",required:""},domProps:{value:e.login.email},on:{input:function(t){t.target.composing||e.$set(e.login,"email",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.login.password,expression:"login.password"}],staticClass:"form-control mb-5",attrs:{type:"password",id:"password",placeholder:"Password",required:""},domProps:{value:e.login.password},on:{input:function(t){t.target.composing||e.$set(e.login,"password",t.target.value)}}}),s("center",[s("button",{staticClass:"btn btn-primary btn-block w-75 my-4",attrs:{type:"submit"}},[e._v(" Sign in ")])]),s("div",[s("span",[e._v("Bist du schon Registriert?")]),s("p",[e._v("Wenn nicht - dann melde dich schnell an!")]),s("router-link",{attrs:{to:"/register"}},[e._v("Klicke Hier!")])],1)],1)],1)])])},R=[],Z=s("1940"),Y=s.n(Z),X={name:"Login",data(){return{login:{email:"",password:""},error:""}},methods:{async loginUser(){try{let t=await this.$http.post("/user/login",this.login),s=t.data.token,a=t.data.user.usertype,r=t.data.user.additionalId,i=t.data.user._id;try{let e=await this.$http.post("/user/getUserStatus",{u_id:i},{headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"}});!0===e.data.isActive?localStorage.setItem("jwt",s):Y()("Info","Sie müssen evtl. Ihre E-Mails püfen und Ihren Account aktivieren","info")}catch(e){Y()("Info","Sie müssen evtl. Ihre E-Mails püfen und Ihren Account aktivieren","info")}if(s){let e=await this.$http.post("/user/checkAdditional",{},{headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"}}),t=e.data.hasAdditional;"registerBusiness"!=a||t?"registerBusiness"==a?this.$router.push("/company/"+r+"/userid/"+i):this.$router.push("/my-wallet/"):this.$router.push("/register-additional")}}catch(e){this.error=e,Y()("Error","Login - Fehler - prüfen Sie Ihre Eingabe bzw. haben _Sie sich freigeschaltet?","error")}}}},ee=X,te=Object(v["a"])(ee,J,R,!1,null,null,null),se=te.exports,ae={components:{Login:se},data(){return{isLogin:"",allBusiness:[]}},methods:{async getAllBusiness(){let e=localStorage.getItem("jwt");console.log(e);let t=d.a.decode(e);this.user=t;try{let t=await this.$http.post("/user/getAllBusiness",{},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});t&&(this.allBusiness=t.data.data)}catch(s){console.log(s)}}},async created(){this.getAllBusiness()}},re=ae,ie=Object(v["a"])(re,K,Q,!1,null,null,null),oe=ie.exports,ne={components:{Start:oe}},le=ne,ce=Object(v["a"])(le,W,H,!1,null,null,null),ue=ce.exports,de=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"control container"},[s("h2",{staticClass:"mt-5"},[e._v("Folgende Gutscheine wurden bei Dir gekauft")]),s("div",[s("control")],1)])},he=[],pe=s("e16d"),me={components:{control:pe["default"]}},ve=me,ge=Object(v["a"])(ve,de,he,!1,null,null,null),fe=ge.exports,_e=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},be=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"checkout container"},[s("h2",[e._v("Der Gutschein liegt in deinem perösnlichen Bereich!")])])}],ye={components:{}},Ce=ye,ke=Object(v["a"])(Ce,_e,be,!1,null,null,null),we=ke.exports,Be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Checkout")],1)},$e=[],Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12 col-md-6 offset-md-3 checkout-container mt-5"},[s("stripe-element-card",{ref:"elementRef",attrs:{pk:e.publishableKey},on:{token:e.tokenCreated}}),s("button",{staticClass:"btn bg-vue2 rounded-pill py-2 btn-block mt-5",on:{click:e.submit}},[e._v("Zahlen (Generate token)")])],1)},xe=[],Se=s("acaf"),Ve={components:{StripeElementCard:Se["StripeElementCard"]},data(){return this.publishableKey="process.env.STRIPE_PUBLISHABLE_KEY",{token:null}},methods:{submit(){this.$refs.elementRef.submit()},tokenCreated(e){console.log(e)}}},je=Ve,Ae=Object(v["a"])(je,Ie,xe,!1,null,null,null),Pe=Ae.exports,Ee={components:{Checkout:Pe}},Le=Ee,Te=Object(v["a"])(Le,Be,$e,!1,null,null,null),Oe=Te.exports,Ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"myCompany"},[s("Company")],1)},Ne=[],Ge=s("b4cc"),Fe={components:{Company:Ge["default"]}},ze=Fe,De=Object(v["a"])(ze,Ue,Ne,!1,null,null,null),Me=De.exports,qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"register-business"},[s("registerAdditonal")],1)},We=[],He=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("h3",{staticClass:"text-center mt-5"},[e._v("Um Partner bei uns zu werden, benötigen wir noch folgende Daten: ")]),s("div",{staticClass:"col-lg-8 offset-lg-2 col-sm-10 offset-sm-1"},[s("form",{staticClass:"text-center border border-primary p-5",staticStyle:{"margin-top":"70px",height:"auto","padding-top":"100px !important"},on:{submit:function(t){return t.preventDefault(),e.registerUserBusiness.apply(null,arguments)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerB.company,expression:"registerB.company"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"Firma",placeholder:"Firmen Name",required:""},domProps:{value:e.registerB.company},on:{input:function(t){t.target.composing||e.$set(e.registerB,"company",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerB.street,expression:"registerB.street"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"street",placeholder:"Straße",required:""},domProps:{value:e.registerB.street},on:{input:function(t){t.target.composing||e.$set(e.registerB,"street",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerB.streetNo,expression:"registerB.streetNo"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"streetNo",placeholder:"Straßen Nr.",required:""},domProps:{value:e.registerB.streetNo},on:{input:function(t){t.target.composing||e.$set(e.registerB,"streetNo",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerB.postcode,expression:"registerB.postcode"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"postcode",placeholder:"PLZ",required:""},domProps:{value:e.registerB.postcode},on:{input:function(t){t.target.composing||e.$set(e.registerB,"postcode",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerB.city,expression:"registerB.city"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"city",placeholder:"Stadt",required:""},domProps:{value:e.registerB.city},on:{input:function(t){t.target.composing||e.$set(e.registerB,"city",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerB.phone,expression:"registerB.phone"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"phone",placeholder:"Telefon",required:""},domProps:{value:e.registerB.phone},on:{input:function(t){t.target.composing||e.$set(e.registerB,"phone",t.target.value)}}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registerB.opening,expression:"registerB.opening"}],staticClass:"form-control mb-5",attrs:{type:"textarea",id:"opening",placeholder:"Öffnungszeiten",required:""},domProps:{value:e.registerB.opening},on:{input:function(t){t.target.composing||e.$set(e.registerB,"opening",t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerB.businessNo,expression:"registerB.businessNo"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"businessNo",placeholder:"Gewerbenummer",required:""},domProps:{value:e.registerB.businessNo},on:{input:function(t){t.target.composing||e.$set(e.registerB,"businessNo",t.target.value)}}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registerB.aboutus,expression:"registerB.aboutus"}],staticClass:"form-control mb-5",attrs:{type:"textarea",id:"aboutus",placeholder:"Bescheibe dein Unternehmen bzw. Geschäft",required:""},domProps:{value:e.registerB.aboutus},on:{input:function(t){t.target.composing||e.$set(e.registerB,"aboutus",t.target.value)}}}),s("MultipleUpload"),s("p",[s("center",[s("button",{staticClass:"btn btn-primary btn-block w-75 my-4",attrs:{type:"submit"}},[e._v(" Speichern ")])])],1)],1)])])},Ke=[],Qe=s("6992"),Je={components:{MultipleUpload:Qe["a"]},data(){return{registerB:{company:"",street:"",streetNo:"",postcode:"",city:"",phone:"",opening:"",businessNo:"",userId:"",aboutus:"",file1:[]}}},methods:{async registerUserBusiness(){try{let o=localStorage.getItem("jwt"),n=d.a.decode(o);this.user=n;let l=this.user._id;this.registerB.userId=l;let c=this.$root.$refs.MultipleUploads.validateFiles();var e=new Date,t=e.getDate(),s=e.getMonth()+1,a=e.getFullYear(),r=e.getHours(),i=e.getMinutes();let u=t+s+a+r+i;c.forEach((e,t)=>{console.log(e),console.log(t);let s=u+"-"+e;this.registerB.file1.push(s)});let h=await this.$http.post("/user/registerBusiness",this.registerB,{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}});if(h){let e=h.data.data._id;this.$root.$refs.MultipleUploads.sendFile(),this.$router.push("/company/"+e+"/userid/"+l)}else Y()("Error","Zusatzinfos Fehler beim speichern","Error")}catch(o){Y()("Error","Zusatzinfos - Error1","error"),console.log(o.response)}}}},Re=Je,Ze=Object(v["a"])(Re,He,Ke,!1,null,null,null),Ye=Ze.exports,Xe={components:{registerAdditonal:Ye}},et=Xe,tt=Object(v["a"])(et,qe,We,!1,null,null,null),st=tt.exports,at=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-6 offset-md-3 basket-container mt-5"},[s("basketItems",{attrs:{basketVoucherList:e.allItems}})],1)])])},rt=[],it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h3",{staticClass:"text-uppercase"},[e._v("Warenkorb ")]),e._m(0),s("div",[s("table",{staticClass:"table table-borderless"},[e._m(1),e._l(e.basketVoucherList,(function(t,a){return s("tbody",{key:a},[s("td",[e._v(" "+e._s(t.name))]),s("td",[s("span",[e._v(e._s(t.price)+"€")]),t.totalPrice?s("span",[e._v(" / "+e._s(t.totalPrice)+"€")]):e._e()]),s("td",[e._v(" "+e._s(t.count)+" "),s("div",[s("i",{staticClass:"fas fa-plus-circle mr-2",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.addCartItem(a)}}}),s("i",{staticClass:"fas fa-minus-circle",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.removeCartItem(a)}}})])]),s("td",[s("i",{staticClass:"fa fa-trash",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.removeAllItem(a)}}})])])}))],2),s("hr")]),s("basketOverview",{attrs:{basketPriceList:e.price,priceWithTax:e.taxPrice,allSelectedVouchers:e.basketVoucherList}})],1)},ot=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"alert bg-vue mt-4"},[s("div",{staticClass:"alert-heading"},[e._v(" Keine Gutscheine im Warenkorb ")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[s("div",{staticClass:"p-2 px-3 text-uppercase"},[e._v("Produkt")])]),s("th",[s("div",{staticClass:"py-2 text-uppercase"},[e._v("Einzelpreis / Gesamt")])]),s("th",[s("div",{staticClass:"py-2 text-uppercase"},[e._v("Anzahl")])]),s("th",[s("div",{staticClass:"py-2 px-3"})])])])}],nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"bg-light rounded-pill px-4 pt-3 text-uppercase font-weight-bold"},[e._v(" Bestellübersicht ")]),s("div",{staticClass:"p-4"},[s("ul",{staticClass:"list-unstyled mb-4"},[s("li",{staticClass:"d-flex justify-content-between pb-3"},[s("strong",{staticClass:"text-muted"},[e._v("Zwischensumme ")]),s("strong",[e._v(e._s(e.basketPriceList)+"€")])]),e._m(0),s("li",{staticClass:"d-flex justify-content-between py-3"},[s("strong",{staticClass:"text-muted"},[e._v("Gesamtkosten")]),s("h5",{staticClass:"font-weight-bold"},[e._v(e._s(e.priceWithTax))])])]),s("button",{staticClass:"btn bg-vue2 rounded-pill py-2 btn-block",on:{click:function(t){return e.buyVoucher(e.allSelectedVouchers)}}},[e._v("KAUFEN")])])])},lt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"d-flex justify-content-between py-3"},[s("strong",{staticClass:"text-muted"},[e._v("MwSt.")]),s("strong",[e._v("19%")])])}],ct=s("bc3a"),ut=s.n(ct),dt={name:"BasketOverview",props:["basketPriceList","priceWithTax","allSelectedVouchers"],methods:{async buyVoucher(e){let t=localStorage.getItem("jwt");if(t){let e=d.a.decode(t);this.user=e}let s=this.user._id,a=e[0].userId,r=e[0]._id,i=!1,o={user_id:s,partner_id:a,offer_voucher_id:r,status:i},n=await this.$http.post("/voucher/buyVoucher",o,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});if(n){const e=new FormData;e.append("buy_id",n.data.dataBuyBasket._id),e.append("user_id",s),e.append("partner_id",a),e.append("offer_voucher_id",r),e.append("status",i),e.append("url",window.location.host),e.append("buyVoucherQr",!0),ut.a.post("/qr",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e),e.data?console.log("QR-Code was Generate"):console.log("Problem by generate QR-Code")})),localStorage.removeItem("myBasketItems"),this.$router.push("/checkout-pay/")}else Y()("Error","Probleme beim Kauf des Gutschein - Error-13343","Error")}},created(){}},ht=dt,pt=(s("eccf"),Object(v["a"])(ht,nt,lt,!1,null,"9a057d3c",null)),mt=pt.exports,vt={name:"BasketItems",props:["basketVoucherList","price","taxPrice"],data(){return{totalPrice:"",tax:"",showPrice:this.price,showTaxPrice:this.taxPrice}},components:{basketOverview:mt},methods:{addCartItem(e){let t=this.basketVoucherList[e].price;this.basketVoucherList[e].originalPrice=t,this.basketVoucherList[e].count++;let s=this.basketVoucherList[e].originalPrice*this.basketVoucherList[e].count;this.basketVoucherList[e].totalPrice=s,localStorage.removeItem("myBasketItems"),localStorage.setItem("myBasketItems",JSON.stringify(this.basketVoucherList)),this.calculateTotalPrice()},removeCartItem(e){if(this.basketVoucherList[e].count>1){this.basketVoucherList[e].count--;let t=this.basketVoucherList[e].price,s=this.basketVoucherList[e].totalPrice,a=s-t;this.basketVoucherList[e].totalPrice=a,this.calculateTotalPrice()}localStorage.removeItem("myBasketItems"),localStorage.setItem("myBasketItems",JSON.stringify(this.basketVoucherList))},removeAllItem(e){delete this.basketVoucherList[e];var t=this.basketVoucherList.filter(Boolean);localStorage.removeItem("myBasketItems"),localStorage.setItem("myBasketItems",JSON.stringify(t)),this.$router.go()},calculateTotalPrice(){let e=this.basketVoucherList;console.log(e);let t=[],s="",a=0;e.filter((function(e){e.originalPrice?(s=parseInt(e.count*e.originalPrice),t.push(s)):(s=parseInt(e.count*e.price),t.push(s))})),t.forEach(e=>{this.totalPrice=parseInt(this.totalPrice+e),a+=e}),this.price=a.toFixed(2),this.tax=.19*a,this.taxPrice=(a+this.tax).toFixed(2)}},created(){console.log(this.basketList)},mounted(){this.calculateTotalPrice()}},gt=vt,ft=(s("86d4"),Object(v["a"])(gt,it,ot,!1,null,"997f93fc",null)),_t=ft.exports,bt={name:"Basket",data(){return{allItems:[]}},components:{basketItems:_t},methods:{async getAllItems(){let e=localStorage.getItem("myBasketItems");e&&(this.allItems=JSON.parse(e))}},created(){this.getAllItems()}},yt=bt,Ct=Object(v["a"])(yt,at,rt,!1,null,null,null),kt=Ct.exports;a["default"].use(A["a"]);const wt=[{path:"/my-wallet",name:"MyWallet",component:G,meta:{requiresAuth:!0}},{path:"/toBasket/:vid",name:"MyCompanyToBasket",component:()=>Promise.resolve().then(s.bind(null,"b4cc"))},{path:"/company/:aid/userid/:uid",name:"MyCompnay",component:Me},{path:"/activated/userId/:uid",name:"ActivatedUser",component:()=>s.e("chunk-2d0b9245").then(s.bind(null,"324d"))},{path:"/checkQrCode/buyId/:buy_id/customerId/:c_id/voucherId/:v_id/partnerId/:p_id/status/:status",name:"CheckQrCode",component:()=>Promise.resolve().then(s.bind(null,"e16d")),meta:{requiresAuth:!0}},{path:"/about",name:"about",component:q},{path:"/verwaltung",name:"verwaltung",component:fe},{path:"/checkout",name:"checkout",component:we},{path:"/",name:"Start",component:ue},{path:"/register-additional",name:"registerBusinessAdditional",component:st},{path:"/register-business",name:"registerBusiness",component:()=>s.e("chunk-2d22bcc3").then(s.bind(null,"f102")),props:{user:"business"}},{path:"/register",name:"registerCustomer",component:()=>s.e("chunk-2d22bcc3").then(s.bind(null,"f102")),props:{user:"user"}},{path:"/add-user-voucher",name:"voucher",component:()=>s.e("chunk-2d0cc6b4").then(s.bind(null,"4e9f")),meta:{requiresAuth:!0}},{path:"/add-business-voucher",name:"businessVoucher",component:()=>s.e("chunk-2d0b6aa9").then(s.bind(null,"1daa")),meta:{requiresAuth:!0}},{path:"/basket",name:"basket",component:kt,meta:{requiresAuth:!0}},{path:"/checkout-pay",name:"stripeCheckout",component:Oe}],Bt=new A["a"]({mode:"history",base:"/",routes:wt});Bt.beforeEach((e,t,s)=>{e.matched.some(e=>e.meta.requiresAuth)&&null==localStorage.getItem("jwt")?s({path:"/"}):s()});var $t=Bt,It=s("5f5b"),xt=s("b1e0");s("f9e3"),s("2dd8"),s("7e7d");a["default"].use(It["a"]),a["default"].use(xt["a"]),a["default"].config.productionTip=!1,a["default"].prototype.$isLogin=!1,a["default"].prototype.$userType="";let St=localStorage.getItem("jwt");if(console.log("token"),console.log(St),St){a["default"].prototype.$isLogin=!0;let e=d.a.decode(St);a["default"].prototype.$companyId=e.additionalId,a["default"].prototype.$userId=e._id,a["default"].prototype.$userType=e.usertype}const Vt=ut.a.create({baseURL:"https://192.168.178.26:4000"});a["default"].prototype.$http=Vt,new a["default"]({router:$t,render:e=>e(j)}).$mount("#app")},"58b3":function(e,t,s){"use strict";s("d92a")},"5c0b":function(e,t,s){"use strict";s("9c0c")},6992:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{attrs:{enctype:"multipart/form-data"}},[e.message?s("div",[s("div",{staticClass:"message-body"},[e._v(e._s(e.message))])]):e._e(),s("div",{staticClass:"field"},[s("label",[e._v(" Mehrere Bilder Uploaden ")]),s("input",{ref:"files",staticClass:"file-input",attrs:{multiple:"",type:"file"},on:{change:e.selectFile}})]),s("div",{staticClass:"field"},e._l(e.files,(function(t,a){return s("div",{key:a,class:"level "+(t.invalidMessage&&"has-text-danger")},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[e._v(" "+e._s(t.name)+" "),t.invalidMessage?s("span",[e._v(" - "+e._s(t.invalidMessage))]):e._e()])]),s("div",{staticClass:"level right"},[s("div",{staticClass:"level-item"},[s("a",{staticClass:"delete",on:{click:function(t){t.preventDefault(),e.files.splice(a,1),e.uploadFiles.splice(a,1)}}},[e._v("X")])])])])})),0)])},r=[],i=s("bc3a"),o=s.n(i),n=s("2ef0"),l=s.n(n),c={name:"MultipleUploads",data(){return{files:[],uploadFiles:[],valdiateUploadFiles:[],message:"",error:!1}},methods:{selectFile(){const e=this.$refs.files.files;if(""!==e)return this.uploadFiles=[...this.uploadFiles,...e],this.files=[...this.files,...l.a.map(e,e=>({name:e.name,size:e.size,type:e.type,invalidMessage:this.validate(e)}))],this.uploadFiles},validate(e){const t=["image/jpeg","image/png"],s=2e5;return e.size>s?`Das Bild ist zu Groß - es sind max: ${s/1e3}Kb möglich`:t.includes(e.type)?"":"kein Bild!"},sendFile(){const e=new FormData;l.a.forEach(this.uploadFiles,t=>{""===this.validate(t)&&e.append("files[]",t)}),o.a.post("/api",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log("response"),console.log(e),e.data?console.log("Your Vuejs with PHP File uploaded successfully."):console.log("Sorry File not uploaded.")})).catch((function(e){console.log(e)}))},validateFiles(){return l.a.forEach(this.uploadFiles,e=>{""===this.validate(e)&&this.valdiateUploadFiles.push(e.name)}),this.valdiateUploadFiles}},created(){this.$root.$refs.MultipleUploads=this}},u=c,d=s("2877"),h=Object(d["a"])(u,a,r,!1,null,null,null);t["a"]=h.exports},"7e7d":function(e,t,s){},"7f63":function(e,t,s){},"86d4":function(e,t,s){"use strict";s("7f63")},"9c0c":function(e,t,s){},b4cc:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-main"},[s("div",{staticClass:"container company"},[e._l(e.companyData,(function(t){return s("div",{key:t._id,staticClass:"aboutus"},[s("h1",{staticClass:"mt-5"},[e._v("Mein Unternhemen: "+e._s(t.company))]),s("div",{staticClass:"mt-3"},[e._v(e._s(t.aboutus))]),s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col-6 col-md-6"},[s("span",[e._v(e._s(t.street)+" "+e._s(t.streetNo))]),e._v(" "),s("br"),s("span",[e._v(e._s(t.postcode)+" "+e._s(t.city))]),e._v(" "),s("br"),s("span",[e._v("Gewebenummer"+e._s(t.businessNo))]),s("br")]),s("div",{staticClass:"col-6 col-md-6"},[s("span",[e._v(e._s(t.opening))]),e._v(" "),s("br"),s("span",[e._v(e._s(t.phone))])])]),s("div",{staticClass:"group cards rows"},[s("div",{staticClass:"item"},[s("VueSlickCarousel",e._b({},"VueSlickCarousel",e.settings,!1),e._l(t.file1,(function(e){return s("div",{key:e},[s("img",{attrs:{src:"/api/uploads/"+e}})])})),0)],1)])])})),s("div",{staticClass:"mt-3"},[e.voucherData.length>0?s("h2",[e._v("Wir bieten diese Gutscheine an")]):e._e(),e._l(e.voucherData,(function(t){return s("div",{key:t._id,staticClass:"myVoucher card col-md-4 col-sm-4 col-xs-12",attrs:{id:t._id}},[s("div",{staticClass:"item"},[s("h6",[e._v("Gutschein: "+e._s(t.name))]),s("span",[e._v("Wert: "+e._s(t.price))]),s("br"),s("span",[e._v("güktig bis: "+e._s(t.expiryDate))]),s("div",{staticClass:"postion-bottom"},[e.sameUser?s("div",[s("span",{staticClass:"mt-4 mb-2"},[s("img",{attrs:{src:"/qr/images/"+t._id+".png"}})]),s("div",[s("span",[s("a",{staticClass:"mr-3",attrs:{href:"#"},on:{click:function(s){return e.edit(t._id)}}},[e._v("editieren")])]),s("span",[s("a",{staticClass:"mr-4",attrs:{href:"#"},on:{click:function(s){return e.del(t._id)}}},[e._v("löschen")])]),e._m(0,!0)])]):s("div",[s("a",{staticClass:"mr-5",attrs:{href:"#"},on:{click:function(s){return e.addVoucher(t._id)}}},[e._v("in den Warenkorb")]),s("router-link",{attrs:{to:"#"}},[e._v("Details")])],1)])])])})),e.sameUser?s("div",{staticClass:"button mt-5"},[s("router-link",{attrs:{to:"/add-business-voucher"}},[e._v("Fügen Sie einen Gutschein hinzu!")])],1):e._e()],2)],2)])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("a",{attrs:{href:"#"}},[e._v("drucken")])])}],i=s("a7ab"),o=s.n(i),n=s("48ac"),l=s.n(n),c=(s("7b8d"),s("6a2c"),{name:"Company",components:{VueSlickCarousel:o.a},data(){return{param:"",companyData:[],voucherData:[],userid:"",sameUser:"",basketItemObj:"",selectedUserid:"",count:"1",settings:{arrows:!0,dots:!0,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:3}}},methods:{async getCompany(){let e=localStorage.getItem("jwt");this.param=this.$route.params;let t={additionalId:this.param.aid};console.log(t);let s=await this.$http.post("/user/findCompany",t,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});console.log(s),s&&(this.companyData=s.data.dataCompany)},async getAllMyVouchers(){let e=localStorage.getItem("jwt");if(e){let t=l.a.decode(e);this.user=t}this.param=this.$route.params;let t=this.param.uid,s=await this.$http.post("/voucher/findVouchers",{userid:t},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});s&&(this.voucherData=s.data.dataVouchers)},checkCurrentUer(){this.param=this.$route.params;let e=this.param.uid,t=localStorage.getItem("jwt");if(this.sameUser=!1,t){let e=l.a.decode(t);this.user=e,this.userid=this.user._id}e===this.userid&&(this.sameUser=!0)},async addVoucher(e){let t=localStorage.getItem("jwt"),s=await this.$http.post("/voucher/toBasket",{voucher_id:e},{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});if(s){let e=s.data.dataBasket[0];e.count=this.count;var a=JSON.parse(localStorage.getItem("myBasketItems"))||[];a.push(e),localStorage.setItem("myBasketItems",JSON.stringify(a)),this.$router.push("/basket/")}}},async created(){this.getCompany(),this.getAllMyVouchers(),this.checkCurrentUer(),this.param=this.$route.params;let e=this.param.vid;console.log(e),e&&this.addVoucher(e)}}),u=c,d=(s("58b3"),s("2877")),h=Object(d["a"])(u,a,r,!1,null,"71e6376a",null);t["default"]=h.exports},d92a:function(e,t,s){},db86:function(e,t,s){"use strict";s("123d")},e16d:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("section",[s("div",{staticClass:"container voucher-overview mt-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"qrcode-wapper",on:{click:e.openCamera}},[s("i",{staticClass:"fas fa-barcode"}),s("span",{staticClass:"ml-2 "},[e._v("QRCode scannen")])]),e.reader?s("div",{staticClass:"d-xl-none d-lg-none d-md-none"},[s("i",{staticClass:"fa-solid fa-rectangle-xmark",on:{click:e.closeCamera}}),s("qrcode-stream",{key:e._uid,attrs:{track:this.paintOutline},on:{init:e.logErrors}})],1):e._e(),s("div",{staticClass:"mt-5"},[s("h4",[e._v("Diese Gutscheine sind noch nicht eingelöst:")]),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table"},[e._m(0),e._l(e.allBoughtVouchers,(function(t){return s("tr",{key:t._id,staticClass:"col-12 p-2"},[s("td",[s("b",[e._v(e._s(t._id))])]),s("td",[e._v(" "+e._s(t.name))]),s("td",[e._v(e._s(t.price)+"€")]),s("td",[e._v(e._s(t.expiryDate))]),s("td",[e._v(e._s(t.userId))])])}))],2)])]),s("div",{staticClass:"mt-5"},[s("h4",[e._v("Diese Gutscheine sind schon eingelöst")]),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table"},[e._m(1),e._l(e.allBoughtVouchersHistory,(function(t){return s("tr",{key:t._id,staticClass:"col-12 p-2"},[s("td",[s("b",[e._v(e._s(t._id))])]),s("td",[e._v(" "+e._s(t.name))]),s("td",[e._v(e._s(t.price)+"€")]),s("td",[e._v(e._s(t.expiryDate))]),s("td",[e._v(e._s(t.userId))])])}))],2)])])])])])])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("th",[e._v("Gutschein-ID")]),s("th",[e._v("Gutschein-Name")]),s("th",[e._v("Wert")]),s("th",[e._v("gültig bis")]),s("th",[e._v("gekauft von User")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("th",[e._v("Gutschein-ID")]),s("th",[e._v("Gutschein-Name")]),s("th",[e._v("Wert")]),s("th",[e._v("gültig bis")]),s("th",[e._v("gekauft von User")])])}],i=s("bb6f"),o=s("48ac"),n=s.n(o),l={name:"AllVouchers",components:{QrcodeStream:i["QrcodeStream"]},data(){return{user:{},allBoughtVouchers:[],allBoughtVouchersHistory:[],userId:this.$userId,reader:!1}},methods:{async getAllBoughtVouchers(){let e=localStorage.getItem("jwt"),t=n.a.decode(e);this.user=t;let s=this.user.usertype,a=this.$userId;try{let t=await this.$http.post("/voucher/getAllBoughtVouchers",{user_id:a,userType:s},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});t&&(this.allBoughtVouchers=t.data.vouchers)}catch(r){console.log(r)}},async getAllBoughtVouchersHistory(){let e=localStorage.getItem("jwt"),t=n.a.decode(e);this.user=t;let s=this.user.usertype,a=this.$userId;try{let t=await this.$http.post("/voucher/getAllBoughtVouchersHistory",{user_id:a,userType:s},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}});t&&(this.allBoughtVouchersHistory=t.data.vouchersHistory)}catch(r){console.log(r)}},async checkVoucher(){this.param=this.$route.params;let e=this.param.buy_id,t=this.param.p_id;if(e){let a=localStorage.getItem("jwt"),r=n.a.decode(a);this.user=r;let i=this.$userId;t!==i&&this.$router.push("/");try{let t=await this.$http.post("/voucher/checkQr",{buyId:e},{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}});console.log(t),t&&(this.checkId=t.data.checkBuyId)}catch(s){console.log(s)}}},paintOutline(e,t){for(const s of e){const[e,...a]=s.cornerPoints;t.strokeStyle="red",t.beginPath(),t.moveTo(e.x,e.y);for(const{x:s,y:r}of a)t.lineTo(s,r);t.lineTo(e.x,e.y),t.closePath(),t.stroke(),window.location=s.rawValue}},logErrors(e){e.catch(console.error)},openCamera(){this.reader=!0},closeCamera(){this.reader=!1}},async created(){this.checkVoucher(),this.getAllBoughtVouchers(),this.getAllBoughtVouchersHistory(),this.$root.$refs.AllVouchers=this}},c=l,u=(s("db86"),s("2877")),d=Object(u["a"])(c,a,r,!1,null,null,null);t["default"]=d.exports},eccf:function(e,t,s){"use strict";s("3745")}});
//# sourceMappingURL=app.2253e656.js.map